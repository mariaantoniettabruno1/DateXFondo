!function(e,s){e=function(){var f=this;f.init=function(){f.$formSelect=s("#gpnf-form"),f.$fieldSelect=s("#gpnf-fields"),f.$formSettings=s("#gpnf-form-settings"),f.$entryLabelSingular=s("#gpnf-entry-label-singular"),f.$entryLabelPlural=s("#gpnf-entry-label-plural"),f.$entryLimitMin=s("#gpnf-entry-limit-min"),f.$entryLimitMax=s("#gpnf-entry-limit-max"),f.$feedProcessing=s("#gpnf-feed-processing"),f.$modalHeaderColor=s("#gpnf-modal-header-color"),f.$editChildForm=s("#gpnf-edit-child-form"),s(document).bind("gform_load_field_settings",function(e,t,n){if("form"==t.type){var i=t.gpnfForm;f.$entryLabelSingular.val(t.gpnfEntryLabelSingular),f.$entryLabelPlural.val(t.gpnfEntryLabelPlural),f.$entryLimitMin.val(t.gpnfEntryLimitMin),f.$entryLimitMax.val(t.gpnfEntryLimitMax),f.$feedProcessing.val(f.getFeedProcessingSetting(t)),f.$modalHeaderColor.val(t.gpnfModalHeaderColor),s("#chip_gpnf-modal-header-color").css("background-color",t.gpnfModalHeaderColor),f.$formSelect.val(i),f.setEditChildFormLink(i);var o=t.gpnfFields?t.gpnfFields:[];f.toggleNestedFormFields(o)}}),s("#chooser_gpnf-modal-header-color, #chip_gpnf-modal-header-color").click(function(e){iColorShow(e.pageX-245,e.pageY-57,"gpnf-modal-header-color","gpnfSetModalHeaderColor")}),s().add(f.$entryLabelSingular).add(f.$entryLabelPlural).on("change",function(){RefreshSelectedFieldPreview()})},f.toggleNestedFormFields=function(e){f.$fieldSelect.attr("disabled",!0),f.$formSelect.val()?(f.$formSettings.show(),f.getFormFields(f.$formSelect.val(),e||[])):f.$formSettings.hide()},f.setEditChildFormLink=function(e){f.$editChildForm.attr("href","?page=gf_edit_forms&id="+e)},f.sortAsmSelectDropdown=function(e){var t=f.$fieldSelect.siblings(".asmSelect"),n=e.map(function(e){return e.id.toString()});t.find('option:not([value=""])').sort(function(e,t){return(e=n.indexOf(e.value.toString()))-(t=n.indexOf(t.value.toString()))}).appendTo(t)},f.setFieldsSelect=function(e,n){var t=[];if(!e.length&&n.length)for(var i=0;i<n.length;i++)t.push('<option value="'+n[i]+'" selected="selected">'+n[i]+"</option>");else{var o=s.extend([],e).sort(function(e,t){return(e=n.indexOf(e.id.toString()))-(t=n.indexOf(t.id.toString()))});for(i=0;i<o.length;i++){var l=o[i],r=-1!=s.inArray(String(l.id),n)?'selected="selected"':"";-1===s.inArray(l.type,["page","html","section","captcha"])&&t.push('<option value="'+l.id+'"'+r+">"+GetLabel(l)+"</option>")}}if(f.$fieldSelect,f.$fieldSelect.html(t.join("")).val(n).change(),f.$fieldSelect.data("asmApplied"))f.sortAsmSelectDropdown(e);else{var a=function(e){SetFieldProperty("gpnfFields",e),RefreshSelectedFieldPreview()};f.$fieldSelect.asmSelect({addItemTarget:"bottom",highlight:!0,sortable:!0}).data("asmApplied",!0);var d=f.$fieldSelect.siblings(".asmListSortable");d.sortable("option","axis",""),d.sortable("option","scroll",!1),d.on("sortstart",function(){var e=s(this).sortable("instance");e.offset.parent=e._getParentOffset()}),d.on("sortupdate",function(){setTimeout(function(){a(f.$fieldSelect.val())},5)}),f.$fieldSelect.change(function(){a(s(this).val())}),f.sortAsmSelectDropdown(e)}},f.getFormFields=function(e,t){s.post(ajaxurl,{action:"gpnf_get_form_fields",nonce:GPNFAdminData.nonces.getFormFields,form_id:e},function(e){f.$formSettings.find("select").attr("disabled",!1),"object"==typeof e?f.setFieldsSelect(e,t):alert(GPNFAdminData.strings.getFormFieldsError)})},f.getFeedProcessingSetting=function(e){return e.gpnfFeedProcessing?e.gpnfFeedProcessing:"parent"},f.init()},window.gpnfSetModalHeaderColor=function(e){SetFieldProperty("gpnfModalHeaderColor",e)},s(document).ready(function(){window.gpGlobals||(window.gpGlobals={}),window.gpGlobals.GPNFAdmin=new e})}(window.GPNFAdmin=window.GPNFAdmin||{},jQuery);
//# sourceMappingURL=gp-nested-forms-admin.js.map