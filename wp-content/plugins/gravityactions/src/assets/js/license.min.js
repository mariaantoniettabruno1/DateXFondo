!function($){"use strict";var GravityActionLicenseSettings={message:"",license_field:$("#license_key"),activate_button:$("[data-edd_action=activate_license]"),deactivate_button:$("[data-edd_action=deactivate_license]"),check_button:$("[data-edd_action=check_license]"),init:function(){GravityActionLicenseSettings.message_fadeout(),GravityActionLicenseSettings.add_status_container(),$(document).on("ready keyup",GravityActionLicenseSettings.license_field,GravityActionLicenseSettings.key_change).on("click",".gv-edd-action",GravityActionLicenseSettings.clicked).on("gv-edd-failed gv-edd-invalid",GravityActionLicenseSettings.failed).on("gv-edd-valid",GravityActionLicenseSettings.valid).on("gv-edd-deactivated",GravityActionLicenseSettings.deactivated).on("gv-edd-inactive gv-edd-other",GravityActionLicenseSettings.other)},message_fadeout:function(){setTimeout(function(){$("#gform_tab_group #message").toggle("scale")},2e3)},add_status_container:function(){$(GravityActionsLicense.license_box).insertBefore(GravityActionLicenseSettings.license_field)},key_change:function(e){var license_key=$("#license_key").val(),showbuttons=!1,hidebuttons=!1;if(license_key.length>0)switch($("#license_key_status").val()){case"valid":hidebuttons=$("[data-edd_action=activate_license]"),showbuttons=$("[data-edd_action=deactivate_license],[data-edd_action=check_license]");break;case"deactivated":case"site_inactive":default:hidebuttons=$("[data-edd_action=deactivate_license]"),showbuttons=$("[data-edd_action=activate_license],[data-edd_action=check_license]")}else 0===license_key.length&&(hidebuttons=$("[data-edd_action*=_license]"));var speed="ready"===e.type?0:"fast";hidebuttons&&hidebuttons.filter(":visible").fadeOut(speed),showbuttons&&showbuttons.filter(":hidden").removeClass("hide").hide().fadeIn(speed)},update_status:function(message){""!==message&&$("#gv-edd-status").replaceWith(message)},set_pending_message:function(message){$("#gv-edd-status").removeClass("hide").addClass("pending").addClass("info").removeClass("success").removeClass("warning").removeClass("error").html($("#gv-edd-status").html().replace(/(<strong>)(.*?)(<\/strong)>/,"$1"+message))},clicked:function(e){e.preventDefault();var $that=$(this),theData={license:$("#license_key").val(),edd_action:$that.attr("data-edd_action"),field_id:$that.attr("id")};$that.not(GravityActionLicenseSettings.check_button).addClass("button-disabled"),$("#gform-settings,#gform-settings .button").css("cursor","wait"),GravityActionLicenseSettings.set_pending_message($that.attr("data-pending_text")),GravityActionLicenseSettings.post_data(theData)},post_data:function(data){$.post(ajaxurl,{action:"gravityactions_license",data:data},function(response){response=$.parseJSON(response),GravityActionLicenseSettings.message=response.message,"check_license"!==data.edd_action&&($("#license_key_status").val(response.license),$("#license_key_response").val(JSON.stringify(response)),$(document).trigger("gv-edd-"+response.license,response)),GravityActionLicenseSettings.update_status(response.message),$("#gform-settings").css("cursor","default").find(".button").css("cursor","pointer")})},valid:function(){GravityActionLicenseSettings.activate_button.fadeOut("medium",function(){GravityActionLicenseSettings.activate_button.removeClass("button-disabled"),GravityActionLicenseSettings.deactivate_button.fadeIn().css("display","inline-block")})},failed:function(){GravityActionLicenseSettings.deactivate_button.removeClass("button-disabled"),GravityActionLicenseSettings.activate_button.removeClass("button-disabled")},deactivated:function(){GravityActionLicenseSettings.deactivate_button.css("min-width",function(){return $(this).width()}).fadeOut("medium",function(){GravityActionLicenseSettings.deactivate_button.removeClass("button-disabled"),GravityActionLicenseSettings.activate_button.fadeIn(function(){$(this).css("display","inline-block")})})},other:function(){GravityActionLicenseSettings.deactivate_button.fadeOut("medium",function(){GravityActionLicenseSettings.activate_button.removeClass("button-disabled").fadeIn().css("display","inline-block")})}};GravityActionLicenseSettings.init()}(jQuery);